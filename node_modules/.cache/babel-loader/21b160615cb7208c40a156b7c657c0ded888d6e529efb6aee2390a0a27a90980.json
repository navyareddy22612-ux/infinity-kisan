{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\navya\\\\Desktop\\\\hackathon\\\\src\\\\pages\\\\Chatbot.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Send, Mic, User, Bot, Volume2, Settings, X, Save } from 'lucide-react';\nimport BackButton from '../components/BackButton';\nimport styles from '../styles/Chatbot.module.css';\nimport { useTranslation } from '../services/i18n';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chatbot = () => {\n  _s();\n  const {\n    t,\n    language\n  } = useTranslation();\n  const [messages, setMessages] = useState([{\n    id: 1,\n    text: t('namaste'),\n    sender: 'bot'\n  }]);\n  const [input, setInput] = useState('');\n  const [isThinking, setIsThinking] = useState(false);\n  const [isListening, setIsListening] = useState(false);\n  const chatEndRef = useRef(null);\n\n  // API Key State\n  const [showSettings, setShowSettings] = useState(false);\n  const [apiKey, setApiKey] = useState('');\n  useEffect(() => {\n    // Prioritize Environment Variable\n    const envKey = process.env.REACT_APP_GEMINI_API_KEY;\n    const storedKey = localStorage.getItem('gemini_api_key');\n    if (envKey) {\n      setApiKey(envKey);\n    } else if (storedKey) {\n      setApiKey(storedKey);\n    }\n  }, []);\n\n  // Auto-scroll to bottom when new messages arrive\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, isThinking]);\n  const saveApiKey = () => {\n    localStorage.setItem('gemini_api_key', apiKey);\n    setShowSettings(false);\n    alert(\"Gemini API Key Saved! The assistant is now smarter.\");\n  };\n  const handleSpeak = text => {\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel();\n      const utterance = new SpeechSynthesisUtterance(text);\n\n      // Map common codes to voices\n      const langMap = {\n        'en': 'en-IN',\n        'hi': 'hi-IN',\n        'te': 'te-IN',\n        'ta': 'ta-IN',\n        'mr': 'mr-IN',\n        'bn': 'bn-IN',\n        'gu': 'gu-IN'\n      };\n      utterance.lang = langMap[language] || 'en-IN';\n      utterance.rate = 0.9;\n      window.speechSynthesis.speak(utterance);\n    } else {\n      alert('Text-to-speech is not supported in your browser.');\n    }\n  };\n  const handleVoiceInput = () => {\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) {\n      alert(\"Speech recognition is not supported in your browser. Please use Chrome.\");\n      return;\n    }\n    const recognition = new SpeechRecognition();\n    const langMap = {\n      'en': 'en-IN',\n      'hi': 'hi-IN',\n      'te': 'te-IN',\n      'ta': 'ta-IN',\n      'mr': 'mr-IN',\n      'bn': 'bn-IN',\n      'gu': 'gu-IN'\n    };\n    recognition.lang = langMap[language] || 'en-IN';\n    recognition.interimResults = false;\n    recognition.onstart = () => {\n      setIsListening(true);\n    };\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setInput(prev => prev + (prev ? \" \" : \"\") + transcript);\n      setIsListening(false);\n    };\n    recognition.onerror = event => {\n      console.error(\"Speech Recognition Error:\", event.error);\n      setIsListening(false);\n      if (event.error === 'not-allowed') {\n        alert(\"Microphone access denied. Please allow microphone permissions in your browser settings.\");\n      }\n    };\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n    recognition.start();\n  };\n  const KNOWLEDGE_BASE = [{\n    keywords: ['hi', 'hello', 'namaste', 'hey'],\n    response: t('namaste')\n  }, {\n    keywords: ['wheat', 'gehu'],\n    response: \"Wheat is a Rabi crop. Best sown in Nov-Dec. Requires cool climate and 4-5 irrigations. Recommended variety: HD-2967.\"\n  }, {\n    keywords: ['rice', 'paddy', 'dhan'],\n    response: \"Paddy needs standing water. Transplanting is done in Kharif (June-July). Nitrogen application is crucial at tillering stage.\"\n  }, {\n    keywords: ['tomato', 'tamatar'],\n    response: \"Tomatoes thrive in warm soil. Watch out for Early Blight. Staking helps improve fruit quality.\"\n  }, {\n    keywords: ['summer', 'zaid'],\n    response: \"Best crops for summer (Zaid season) are Watermelon, Muskmelon, Cucumber, Pumpkin, and Moong Dal. Ensure good irrigation.\"\n  }, {\n    keywords: ['fertilizer', 'khad', 'urea', 'npk'],\n    response: \"Soil testing is recommended before applying fertilizer. Generally, NPK 4:2:1 ratio is good for grains.\"\n  }, {\n    keywords: ['pest', 'insect', 'bug', 'worm'],\n    response: \"For pests, first identify the insect. Neem oil spray is a good organic deterrent using 5ml/liter water. For severe infestation, consult a local expert.\"\n  }, {\n    keywords: ['anthracnose', 'fungus', 'fungicide', 'blight', 'rust', 'disease'],\n    response: \"For fungal diseases like Anthracnose or Blight, you can use fungicides like Mancozeb (2.5g/L) or Carbendazim (1g/L). Ensure good drainage.\"\n  }, {\n    keywords: ['weather', 'rain'],\n    response: \"I can't check live weather yet, but usually, monsoon starts in June. Ensure drainage if heavy rain is expected.\"\n  }, {\n    keywords: ['price', 'rate', 'mandi'],\n    response: \"For exact prices, please visit the 'Price Forecasting' section in the app. Prices change daily based on demand.\"\n  }];\n  const generateLocalResponse = text => {\n    const lowerText = text.toLowerCase();\n    for (const entry of KNOWLEDGE_BASE) {\n      if (entry.keywords.some(k => new RegExp(`\\\\b${k}\\\\b`, 'i').test(lowerText))) {\n        return entry.response;\n      }\n    }\n    return \"I'm using local knowledge. For better answers, please add a Google Gemini API Key in settings.\";\n  };\n  const fetchGeminiResponse = async userText => {\n    try {\n      const languageNameMap = {\n        en: 'English',\n        hi: 'Hindi',\n        te: 'Telugu',\n        ta: 'Tamil',\n        kn: 'Kannada',\n        ml: 'Malayalam',\n        mr: 'Marathi',\n        gu: 'Gujarati',\n        bn: 'Bengali',\n        pa: 'Punjabi',\n        ur: 'Urdu',\n        or: 'Odia'\n      };\n      const targetLanguage = languageNameMap[language] || 'English';\n      const contextualPrompt = `You are a helpful farming assistant for Indian farmers. \n            Answer the following question about agriculture in ${targetLanguage}. \n            Keep your response concise and practical.\n\n            Question: ${userText}`;\n      const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=${apiKey}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          contents: [{\n            parts: [{\n              text: contextualPrompt\n            }]\n          }]\n        })\n      });\n      const data = await response.json();\n      if (data.error) return `Error: ${data.error.message}.`;\n      if (data.candidates && data.candidates[0] && data.candidates[0].content) {\n        return data.candidates[0].content.parts[0].text;\n      } else {\n        return \"Sorry, I couldn't generate a response.\";\n      }\n    } catch (error) {\n      return \"Sorry, I couldn't connect to the server.\";\n    }\n  };\n  const handleSend = async e => {\n    if (e) e.preventDefault();\n    if (!input.trim() || isThinking) return;\n    const userMsg = {\n      id: Date.now(),\n      text: input,\n      sender: 'user'\n    };\n    setMessages(prev => [...prev, userMsg]);\n    setInput('');\n    setIsThinking(true);\n    let botResponseText;\n    if (apiKey) {\n      botResponseText = await fetchGeminiResponse(userMsg.text);\n    } else {\n      await new Promise(r => setTimeout(r, 800));\n      botResponseText = generateLocalResponse(userMsg.text);\n    }\n    setMessages(prev => [...prev, {\n      id: Date.now() + 1,\n      text: botResponseText,\n      sender: 'bot'\n    }]);\n    setIsThinking(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      height: 'calc(100vh - 140px)',\n      display: 'flex',\n      flexDirection: 'column',\n      position: 'relative',\n      maxWidth: '800px',\n      margin: '0 auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: '10px 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(BackButton, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setShowSettings(true),\n        style: {\n          background: 'none',\n          border: 'none',\n          cursor: 'pointer',\n          padding: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(Settings, {\n          color: \"#4b5563\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }, this), showSettings && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'absolute',\n        top: '60px',\n        right: '20px',\n        left: '20px',\n        zIndex: 100,\n        background: 'white',\n        padding: '20px',\n        borderRadius: '12px',\n        boxShadow: '0 10px 25px rgba(0,0,0,0.1)',\n        border: '1px solid #e5e7eb'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between',\n          marginBottom: '15px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: 0\n          },\n          children: t('assistant_settings')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowSettings(false),\n          style: {\n            background: 'none',\n            border: 'none',\n            cursor: 'pointer'\n          },\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 138\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n        style: {\n          display: 'block',\n          marginBottom: '8px',\n          fontSize: '0.9rem',\n          color: '#374151'\n        },\n        children: t('enter_api_key')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          gap: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: apiKey,\n          onChange: e => setApiKey(e.target.value),\n          placeholder: \"AIzaSy...\",\n          style: {\n            flex: 1,\n            padding: '10px',\n            borderRadius: '8px',\n            border: '1px solid #d1d5db'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: saveApiKey,\n          className: \"btn btn-primary\",\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: '5px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Save, {\n            size: 16\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 29\n          }, this), \" Save\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.chatHeader,\n      style: {\n        marginTop: '0',\n        borderRadius: '12px 12px 0 0'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: [t('ai_assistant'), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontSize: '0.7em',\n            fontWeight: 'normal',\n            opacity: 0.8\n          },\n          children: apiKey ? `(${t('online_mode')})` : `(${t('offline_mode')})`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 41\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.status,\n        style: {\n          backgroundColor: apiKey ? '#10b981' : '#f59e0b',\n          color: 'white',\n          borderColor: 'transparent'\n        },\n        children: apiKey ? t('smart_ai_active') : t('offline_knowledge')\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.chatWindow,\n      children: [messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.message} ${msg.sender === 'user' ? styles.user : styles.bot}`,\n        children: [msg.sender === 'bot' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.avatar,\n          children: /*#__PURE__*/_jsxDEV(Bot, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 81\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 50\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.bubble,\n          children: [msg.text, msg.sender === 'bot' && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.speakBtn,\n            onClick: () => handleSpeak(msg.text),\n            style: {\n              border: 'none',\n              background: 'none',\n              cursor: 'pointer',\n              padding: '4px',\n              color: '#6b7280'\n            },\n            title: \"Listen\",\n            children: /*#__PURE__*/_jsxDEV(Volume2, {\n              size: 14\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 37\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 25\n        }, this), msg.sender === 'user' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.avatar,\n          children: /*#__PURE__*/_jsxDEV(User, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 82\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 51\n        }, this)]\n      }, msg.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 21\n      }, this)), isThinking && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `${styles.message} ${styles.bot}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.avatar,\n          children: /*#__PURE__*/_jsxDEV(Bot, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 269,\n            columnNumber: 56\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.bubble,\n          style: {\n            fontStyle: 'italic',\n            color: '#6b7280'\n          },\n          children: t('thinking')\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 275,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSend,\n      className: styles.inputArea,\n      style: {\n        borderRadius: '0 0 12px 12px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: styles.iconBtn,\n        onClick: handleVoiceInput,\n        style: {\n          border: 'none',\n          cursor: 'pointer',\n          color: isListening ? '#ef4444' : '#6b7280',\n          backgroundColor: isListening ? '#fee2e2' : 'var(--background)'\n        },\n        title: isListening ? \"Listening...\" : \"Voice Input\",\n        children: /*#__PURE__*/_jsxDEV(Mic, {\n          size: 20,\n          className: isListening ? styles.pulse : ''\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: t('type_question'),\n        value: input,\n        onChange: e => setInput(e.target.value),\n        disabled: isThinking\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: styles.sendBtn,\n        disabled: !input.trim() || isThinking,\n        style: {\n          border: 'none',\n          cursor: 'pointer'\n        },\n        children: /*#__PURE__*/_jsxDEV(Send, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 9\n  }, this);\n};\n_s(Chatbot, \"eWOcXY2dSBl3K/THv2ThH+RB5Kg=\", false, function () {\n  return [useTranslation];\n});\n_c = Chatbot;\nexport default Chatbot;\nvar _c;\n$RefreshReg$(_c, \"Chatbot\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Send","Mic","User","Bot","Volume2","Settings","X","Save","BackButton","styles","useTranslation","jsxDEV","_jsxDEV","Chatbot","_s","t","language","messages","setMessages","id","text","sender","input","setInput","isThinking","setIsThinking","isListening","setIsListening","chatEndRef","showSettings","setShowSettings","apiKey","setApiKey","envKey","process","env","REACT_APP_GEMINI_API_KEY","storedKey","localStorage","getItem","_chatEndRef$current","current","scrollIntoView","behavior","saveApiKey","setItem","alert","handleSpeak","window","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","langMap","lang","rate","speak","handleVoiceInput","SpeechRecognition","webkitSpeechRecognition","recognition","interimResults","onstart","onresult","event","transcript","results","prev","onerror","console","error","onend","start","KNOWLEDGE_BASE","keywords","response","generateLocalResponse","lowerText","toLowerCase","entry","some","k","RegExp","test","fetchGeminiResponse","userText","languageNameMap","en","hi","te","ta","kn","ml","mr","gu","bn","pa","ur","or","targetLanguage","contextualPrompt","fetch","method","headers","body","JSON","stringify","contents","parts","data","json","message","candidates","content","handleSend","e","preventDefault","trim","userMsg","Date","now","botResponseText","Promise","r","setTimeout","className","style","height","display","flexDirection","position","maxWidth","margin","children","justifyContent","alignItems","padding","fileName","_jsxFileName","lineNumber","columnNumber","onClick","background","border","cursor","color","top","right","left","zIndex","borderRadius","boxShadow","marginBottom","size","fontSize","gap","type","value","onChange","target","placeholder","flex","chatHeader","marginTop","fontWeight","opacity","status","backgroundColor","borderColor","chatWindow","map","msg","user","bot","avatar","bubble","speakBtn","title","fontStyle","ref","onSubmit","inputArea","iconBtn","pulse","disabled","sendBtn","_c","$RefreshReg$"],"sources":["C:/Users/navya/Desktop/hackathon/src/pages/Chatbot.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { Send, Mic, User, Bot, Volume2, Settings, X, Save } from 'lucide-react';\r\nimport BackButton from '../components/BackButton';\r\nimport styles from '../styles/Chatbot.module.css';\r\nimport { useTranslation } from '../services/i18n';\r\n\r\nconst Chatbot = () => {\r\n    const { t, language } = useTranslation();\r\n    const [messages, setMessages] = useState([\r\n        { id: 1, text: t('namaste'), sender: 'bot' }\r\n    ]);\r\n    const [input, setInput] = useState('');\r\n    const [isThinking, setIsThinking] = useState(false);\r\n    const [isListening, setIsListening] = useState(false);\r\n    const chatEndRef = useRef(null);\r\n\r\n    // API Key State\r\n    const [showSettings, setShowSettings] = useState(false);\r\n    const [apiKey, setApiKey] = useState('');\r\n\r\n    useEffect(() => {\r\n        // Prioritize Environment Variable\r\n        const envKey = process.env.REACT_APP_GEMINI_API_KEY;\r\n        const storedKey = localStorage.getItem('gemini_api_key');\r\n\r\n        if (envKey) {\r\n            setApiKey(envKey);\r\n        } else if (storedKey) {\r\n            setApiKey(storedKey);\r\n        }\r\n    }, []);\r\n\r\n    // Auto-scroll to bottom when new messages arrive\r\n    useEffect(() => {\r\n        chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n    }, [messages, isThinking]);\r\n\r\n    const saveApiKey = () => {\r\n        localStorage.setItem('gemini_api_key', apiKey);\r\n        setShowSettings(false);\r\n        alert(\"Gemini API Key Saved! The assistant is now smarter.\");\r\n    };\r\n\r\n    const handleSpeak = (text) => {\r\n        if ('speechSynthesis' in window) {\r\n            window.speechSynthesis.cancel();\r\n            const utterance = new SpeechSynthesisUtterance(text);\r\n\r\n            // Map common codes to voices\r\n            const langMap = {\r\n                'en': 'en-IN',\r\n                'hi': 'hi-IN',\r\n                'te': 'te-IN',\r\n                'ta': 'ta-IN',\r\n                'mr': 'mr-IN',\r\n                'bn': 'bn-IN',\r\n                'gu': 'gu-IN'\r\n            };\r\n\r\n            utterance.lang = langMap[language] || 'en-IN';\r\n            utterance.rate = 0.9;\r\n            window.speechSynthesis.speak(utterance);\r\n        } else {\r\n            alert('Text-to-speech is not supported in your browser.');\r\n        }\r\n    };\r\n\r\n    const handleVoiceInput = () => {\r\n        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n        if (!SpeechRecognition) {\r\n            alert(\"Speech recognition is not supported in your browser. Please use Chrome.\");\r\n            return;\r\n        }\r\n\r\n        const recognition = new SpeechRecognition();\r\n\r\n        const langMap = {\r\n            'en': 'en-IN',\r\n            'hi': 'hi-IN',\r\n            'te': 'te-IN',\r\n            'ta': 'ta-IN',\r\n            'mr': 'mr-IN',\r\n            'bn': 'bn-IN',\r\n            'gu': 'gu-IN'\r\n        };\r\n\r\n        recognition.lang = langMap[language] || 'en-IN';\r\n        recognition.interimResults = false;\r\n\r\n        recognition.onstart = () => {\r\n            setIsListening(true);\r\n        };\r\n\r\n        recognition.onresult = (event) => {\r\n            const transcript = event.results[0][0].transcript;\r\n            setInput(prev => prev + (prev ? \" \" : \"\") + transcript);\r\n            setIsListening(false);\r\n        };\r\n\r\n        recognition.onerror = (event) => {\r\n            console.error(\"Speech Recognition Error:\", event.error);\r\n            setIsListening(false);\r\n            if (event.error === 'not-allowed') {\r\n                alert(\"Microphone access denied. Please allow microphone permissions in your browser settings.\");\r\n            }\r\n        };\r\n\r\n        recognition.onend = () => {\r\n            setIsListening(false);\r\n        };\r\n\r\n        recognition.start();\r\n    };\r\n\r\n    const KNOWLEDGE_BASE = [\r\n        { keywords: ['hi', 'hello', 'namaste', 'hey'], response: t('namaste') },\r\n        { keywords: ['wheat', 'gehu'], response: \"Wheat is a Rabi crop. Best sown in Nov-Dec. Requires cool climate and 4-5 irrigations. Recommended variety: HD-2967.\" },\r\n        { keywords: ['rice', 'paddy', 'dhan'], response: \"Paddy needs standing water. Transplanting is done in Kharif (June-July). Nitrogen application is crucial at tillering stage.\" },\r\n        { keywords: ['tomato', 'tamatar'], response: \"Tomatoes thrive in warm soil. Watch out for Early Blight. Staking helps improve fruit quality.\" },\r\n        { keywords: ['summer', 'zaid'], response: \"Best crops for summer (Zaid season) are Watermelon, Muskmelon, Cucumber, Pumpkin, and Moong Dal. Ensure good irrigation.\" },\r\n        { keywords: ['fertilizer', 'khad', 'urea', 'npk'], response: \"Soil testing is recommended before applying fertilizer. Generally, NPK 4:2:1 ratio is good for grains.\" },\r\n        { keywords: ['pest', 'insect', 'bug', 'worm'], response: \"For pests, first identify the insect. Neem oil spray is a good organic deterrent using 5ml/liter water. For severe infestation, consult a local expert.\" },\r\n        { keywords: ['anthracnose', 'fungus', 'fungicide', 'blight', 'rust', 'disease'], response: \"For fungal diseases like Anthracnose or Blight, you can use fungicides like Mancozeb (2.5g/L) or Carbendazim (1g/L). Ensure good drainage.\" },\r\n        { keywords: ['weather', 'rain'], response: \"I can't check live weather yet, but usually, monsoon starts in June. Ensure drainage if heavy rain is expected.\" },\r\n        { keywords: ['price', 'rate', 'mandi'], response: \"For exact prices, please visit the 'Price Forecasting' section in the app. Prices change daily based on demand.\" },\r\n    ];\r\n\r\n    const generateLocalResponse = (text) => {\r\n        const lowerText = text.toLowerCase();\r\n        for (const entry of KNOWLEDGE_BASE) {\r\n            if (entry.keywords.some(k => new RegExp(`\\\\b${k}\\\\b`, 'i').test(lowerText))) {\r\n                return entry.response;\r\n            }\r\n        }\r\n        return \"I'm using local knowledge. For better answers, please add a Google Gemini API Key in settings.\";\r\n    };\r\n\r\n    const fetchGeminiResponse = async (userText) => {\r\n        try {\r\n            const languageNameMap = {\r\n                en: 'English', hi: 'Hindi', te: 'Telugu', ta: 'Tamil', kn: 'Kannada',\r\n                ml: 'Malayalam', mr: 'Marathi', gu: 'Gujarati', bn: 'Bengali',\r\n                pa: 'Punjabi', ur: 'Urdu', or: 'Odia'\r\n            };\r\n            const targetLanguage = languageNameMap[language] || 'English';\r\n\r\n            const contextualPrompt = `You are a helpful farming assistant for Indian farmers. \r\n            Answer the following question about agriculture in ${targetLanguage}. \r\n            Keep your response concise and practical.\r\n\r\n            Question: ${userText}`;\r\n\r\n            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-flash-latest:generateContent?key=${apiKey}`, {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({\r\n                    contents: [{\r\n                        parts: [{ text: contextualPrompt }]\r\n                    }]\r\n                })\r\n            });\r\n\r\n            const data = await response.json();\r\n            if (data.error) return `Error: ${data.error.message}.`;\r\n\r\n            if (data.candidates && data.candidates[0] && data.candidates[0].content) {\r\n                return data.candidates[0].content.parts[0].text;\r\n            } else {\r\n                return \"Sorry, I couldn't generate a response.\";\r\n            }\r\n        } catch (error) {\r\n            return \"Sorry, I couldn't connect to the server.\";\r\n        }\r\n    };\r\n\r\n    const handleSend = async (e) => {\r\n        if (e) e.preventDefault();\r\n        if (!input.trim() || isThinking) return;\r\n\r\n        const userMsg = { id: Date.now(), text: input, sender: 'user' };\r\n        setMessages(prev => [...prev, userMsg]);\r\n        setInput('');\r\n        setIsThinking(true);\r\n\r\n        let botResponseText;\r\n\r\n        if (apiKey) {\r\n            botResponseText = await fetchGeminiResponse(userMsg.text);\r\n        } else {\r\n            await new Promise(r => setTimeout(r, 800));\r\n            botResponseText = generateLocalResponse(userMsg.text);\r\n        }\r\n\r\n        setMessages(prev => [...prev, {\r\n            id: Date.now() + 1,\r\n            text: botResponseText,\r\n            sender: 'bot'\r\n        }]);\r\n        setIsThinking(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"container\" style={{ height: 'calc(100vh - 140px)', display: 'flex', flexDirection: 'column', position: 'relative', maxWidth: '800px', margin: '0 auto' }}>\r\n            <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', padding: '10px 0' }}>\r\n                <BackButton />\r\n                <button\r\n                    onClick={() => setShowSettings(true)}\r\n                    style={{ background: 'none', border: 'none', cursor: 'pointer', padding: '10px' }}\r\n                >\r\n                    <Settings color=\"#4b5563\" />\r\n                </button>\r\n            </div>\r\n\r\n            {showSettings && (\r\n                <div style={{\r\n                    position: 'absolute', top: '60px', right: '20px', left: '20px', zIndex: 100,\r\n                    background: 'white', padding: '20px', borderRadius: '12px',\r\n                    boxShadow: '0 10px 25px rgba(0,0,0,0.1)', border: '1px solid #e5e7eb'\r\n                }}>\r\n                    <div style={{ display: 'flex', justifyContent: 'space-between', marginBottom: '15px' }}>\r\n                        <h3 style={{ margin: 0 }}>{t('assistant_settings')}</h3>\r\n                        <button onClick={() => setShowSettings(false)} style={{ background: 'none', border: 'none', cursor: 'pointer' }}><X size={20} /></button>\r\n                    </div>\r\n                    <label style={{ display: 'block', marginBottom: '8px', fontSize: '0.9rem', color: '#374151' }}>{t('enter_api_key')}</label>\r\n                    <div style={{ display: 'flex', gap: '10px' }}>\r\n                        <input\r\n                            type=\"password\"\r\n                            value={apiKey}\r\n                            onChange={(e) => setApiKey(e.target.value)}\r\n                            placeholder=\"AIzaSy...\"\r\n                            style={{ flex: 1, padding: '10px', borderRadius: '8px', border: '1px solid #d1d5db' }}\r\n                        />\r\n                        <button onClick={saveApiKey} className=\"btn btn-primary\" style={{ display: 'flex', alignItems: 'center', gap: '5px' }}>\r\n                            <Save size={16} /> Save\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            <div className={styles.chatHeader} style={{ marginTop: '0', borderRadius: '12px 12px 0 0' }}>\r\n                <h2>{t('ai_assistant')} <span style={{ fontSize: '0.7em', fontWeight: 'normal', opacity: 0.8 }}>{apiKey ? `(${t('online_mode')})` : `(${t('offline_mode')})`}</span></h2>\r\n                <div className={styles.status} style={{ backgroundColor: apiKey ? '#10b981' : '#f59e0b', color: 'white', borderColor: 'transparent' }}>\r\n                    {apiKey ? t('smart_ai_active') : t('offline_knowledge')}\r\n                </div>\r\n            </div>\r\n\r\n            <div className={styles.chatWindow}>\r\n                {messages.map((msg) => (\r\n                    <div key={msg.id} className={`${styles.message} ${msg.sender === 'user' ? styles.user : styles.bot}`}>\r\n                        {msg.sender === 'bot' && <div className={styles.avatar}><Bot size={20} /></div>}\r\n                        <div className={styles.bubble}>\r\n                            {msg.text}\r\n                            {msg.sender === 'bot' && (\r\n                                <button\r\n                                    className={styles.speakBtn}\r\n                                    onClick={() => handleSpeak(msg.text)}\r\n                                    style={{ border: 'none', background: 'none', cursor: 'pointer', padding: '4px', color: '#6b7280' }}\r\n                                    title=\"Listen\"\r\n                                >\r\n                                    <Volume2 size={14} />\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                        {msg.sender === 'user' && <div className={styles.avatar}><User size={20} /></div>}\r\n                    </div>\r\n                ))}\r\n                {isThinking && (\r\n                    <div className={`${styles.message} ${styles.bot}`}>\r\n                        <div className={styles.avatar}><Bot size={20} /></div>\r\n                        <div className={styles.bubble} style={{ fontStyle: 'italic', color: '#6b7280' }}>\r\n                            {t('thinking')}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n                <div ref={chatEndRef} />\r\n            </div>\r\n\r\n            <form onSubmit={handleSend} className={styles.inputArea} style={{ borderRadius: '0 0 12px 12px' }}>\r\n                <button\r\n                    type=\"button\"\r\n                    className={styles.iconBtn}\r\n                    onClick={handleVoiceInput}\r\n                    style={{\r\n                        border: 'none',\r\n                        cursor: 'pointer',\r\n                        color: isListening ? '#ef4444' : '#6b7280',\r\n                        backgroundColor: isListening ? '#fee2e2' : 'var(--background)'\r\n                    }}\r\n                    title={isListening ? \"Listening...\" : \"Voice Input\"}\r\n                >\r\n                    <Mic size={20} className={isListening ? styles.pulse : ''} />\r\n                </button>\r\n                <input\r\n                    type=\"text\"\r\n                    placeholder={t('type_question')}\r\n                    value={input}\r\n                    onChange={e => setInput(e.target.value)}\r\n                    disabled={isThinking}\r\n                />\r\n                <button type=\"submit\" className={styles.sendBtn} disabled={!input.trim() || isThinking} style={{ border: 'none', cursor: 'pointer' }}>\r\n                    <Send size={20} />\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Chatbot;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAC1D,SAASC,IAAI,EAAEC,GAAG,EAAEC,IAAI,EAAEC,GAAG,EAAEC,OAAO,EAAEC,QAAQ,EAAEC,CAAC,EAAEC,IAAI,QAAQ,cAAc;AAC/E,OAAOC,UAAU,MAAM,0BAA0B;AACjD,OAAOC,MAAM,MAAM,8BAA8B;AACjD,SAASC,cAAc,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,MAAMC,OAAO,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAClB,MAAM;IAAEC,CAAC;IAAEC;EAAS,CAAC,GAAGN,cAAc,CAAC,CAAC;EACxC,MAAM,CAACO,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC,CACrC;IAAEsB,EAAE,EAAE,CAAC;IAAEC,IAAI,EAAEL,CAAC,CAAC,SAAS,CAAC;IAAEM,MAAM,EAAE;EAAM,CAAC,CAC/C,CAAC;EACF,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAG1B,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAAC2B,UAAU,EAAEC,aAAa,CAAC,GAAG5B,QAAQ,CAAC,KAAK,CAAC;EACnD,MAAM,CAAC6B,WAAW,EAAEC,cAAc,CAAC,GAAG9B,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAM+B,UAAU,GAAG7B,MAAM,CAAC,IAAI,CAAC;;EAE/B;EACA,MAAM,CAAC8B,YAAY,EAAEC,eAAe,CAAC,GAAGjC,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACkC,MAAM,EAAEC,SAAS,CAAC,GAAGnC,QAAQ,CAAC,EAAE,CAAC;EAExCC,SAAS,CAAC,MAAM;IACZ;IACA,MAAMmC,MAAM,GAAGC,OAAO,CAACC,GAAG,CAACC,wBAAwB;IACnD,MAAMC,SAAS,GAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;IAExD,IAAIN,MAAM,EAAE;MACRD,SAAS,CAACC,MAAM,CAAC;IACrB,CAAC,MAAM,IAAII,SAAS,EAAE;MAClBL,SAAS,CAACK,SAAS,CAAC;IACxB;EACJ,CAAC,EAAE,EAAE,CAAC;;EAEN;EACAvC,SAAS,CAAC,MAAM;IAAA,IAAA0C,mBAAA;IACZ,CAAAA,mBAAA,GAAAZ,UAAU,CAACa,OAAO,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBE,cAAc,CAAC;MAAEC,QAAQ,EAAE;IAAS,CAAC,CAAC;EAC9D,CAAC,EAAE,CAAC1B,QAAQ,EAAEO,UAAU,CAAC,CAAC;EAE1B,MAAMoB,UAAU,GAAGA,CAAA,KAAM;IACrBN,YAAY,CAACO,OAAO,CAAC,gBAAgB,EAAEd,MAAM,CAAC;IAC9CD,eAAe,CAAC,KAAK,CAAC;IACtBgB,KAAK,CAAC,qDAAqD,CAAC;EAChE,CAAC;EAED,MAAMC,WAAW,GAAI3B,IAAI,IAAK;IAC1B,IAAI,iBAAiB,IAAI4B,MAAM,EAAE;MAC7BA,MAAM,CAACC,eAAe,CAACC,MAAM,CAAC,CAAC;MAC/B,MAAMC,SAAS,GAAG,IAAIC,wBAAwB,CAAChC,IAAI,CAAC;;MAEpD;MACA,MAAMiC,OAAO,GAAG;QACZ,IAAI,EAAE,OAAO;QACb,IAAI,EAAE,OAAO;QACb,IAAI,EAAE,OAAO;QACb,IAAI,EAAE,OAAO;QACb,IAAI,EAAE,OAAO;QACb,IAAI,EAAE,OAAO;QACb,IAAI,EAAE;MACV,CAAC;MAEDF,SAAS,CAACG,IAAI,GAAGD,OAAO,CAACrC,QAAQ,CAAC,IAAI,OAAO;MAC7CmC,SAAS,CAACI,IAAI,GAAG,GAAG;MACpBP,MAAM,CAACC,eAAe,CAACO,KAAK,CAACL,SAAS,CAAC;IAC3C,CAAC,MAAM;MACHL,KAAK,CAAC,kDAAkD,CAAC;IAC7D;EACJ,CAAC;EAED,MAAMW,gBAAgB,GAAGA,CAAA,KAAM;IAC3B,MAAMC,iBAAiB,GAAGV,MAAM,CAACU,iBAAiB,IAAIV,MAAM,CAACW,uBAAuB;IACpF,IAAI,CAACD,iBAAiB,EAAE;MACpBZ,KAAK,CAAC,yEAAyE,CAAC;MAChF;IACJ;IAEA,MAAMc,WAAW,GAAG,IAAIF,iBAAiB,CAAC,CAAC;IAE3C,MAAML,OAAO,GAAG;MACZ,IAAI,EAAE,OAAO;MACb,IAAI,EAAE,OAAO;MACb,IAAI,EAAE,OAAO;MACb,IAAI,EAAE,OAAO;MACb,IAAI,EAAE,OAAO;MACb,IAAI,EAAE,OAAO;MACb,IAAI,EAAE;IACV,CAAC;IAEDO,WAAW,CAACN,IAAI,GAAGD,OAAO,CAACrC,QAAQ,CAAC,IAAI,OAAO;IAC/C4C,WAAW,CAACC,cAAc,GAAG,KAAK;IAElCD,WAAW,CAACE,OAAO,GAAG,MAAM;MACxBnC,cAAc,CAAC,IAAI,CAAC;IACxB,CAAC;IAEDiC,WAAW,CAACG,QAAQ,GAAIC,KAAK,IAAK;MAC9B,MAAMC,UAAU,GAAGD,KAAK,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAACD,UAAU;MACjD1C,QAAQ,CAAC4C,IAAI,IAAIA,IAAI,IAAIA,IAAI,GAAG,GAAG,GAAG,EAAE,CAAC,GAAGF,UAAU,CAAC;MACvDtC,cAAc,CAAC,KAAK,CAAC;IACzB,CAAC;IAEDiC,WAAW,CAACQ,OAAO,GAAIJ,KAAK,IAAK;MAC7BK,OAAO,CAACC,KAAK,CAAC,2BAA2B,EAAEN,KAAK,CAACM,KAAK,CAAC;MACvD3C,cAAc,CAAC,KAAK,CAAC;MACrB,IAAIqC,KAAK,CAACM,KAAK,KAAK,aAAa,EAAE;QAC/BxB,KAAK,CAAC,yFAAyF,CAAC;MACpG;IACJ,CAAC;IAEDc,WAAW,CAACW,KAAK,GAAG,MAAM;MACtB5C,cAAc,CAAC,KAAK,CAAC;IACzB,CAAC;IAEDiC,WAAW,CAACY,KAAK,CAAC,CAAC;EACvB,CAAC;EAED,MAAMC,cAAc,GAAG,CACnB;IAAEC,QAAQ,EAAE,CAAC,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,KAAK,CAAC;IAAEC,QAAQ,EAAE5D,CAAC,CAAC,SAAS;EAAE,CAAC,EACvE;IAAE2D,QAAQ,EAAE,CAAC,OAAO,EAAE,MAAM,CAAC;IAAEC,QAAQ,EAAE;EAAuH,CAAC,EACjK;IAAED,QAAQ,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,MAAM,CAAC;IAAEC,QAAQ,EAAE;EAA+H,CAAC,EACjL;IAAED,QAAQ,EAAE,CAAC,QAAQ,EAAE,SAAS,CAAC;IAAEC,QAAQ,EAAE;EAAiG,CAAC,EAC/I;IAAED,QAAQ,EAAE,CAAC,QAAQ,EAAE,MAAM,CAAC;IAAEC,QAAQ,EAAE;EAA2H,CAAC,EACtK;IAAED,QAAQ,EAAE,CAAC,YAAY,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,CAAC;IAAEC,QAAQ,EAAE;EAAyG,CAAC,EACvK;IAAED,QAAQ,EAAE,CAAC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,MAAM,CAAC;IAAEC,QAAQ,EAAE;EAA0J,CAAC,EACpN;IAAED,QAAQ,EAAE,CAAC,aAAa,EAAE,QAAQ,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,EAAE,SAAS,CAAC;IAAEC,QAAQ,EAAE;EAA6I,CAAC,EACzO;IAAED,QAAQ,EAAE,CAAC,SAAS,EAAE,MAAM,CAAC;IAAEC,QAAQ,EAAE;EAAkH,CAAC,EAC9J;IAAED,QAAQ,EAAE,CAAC,OAAO,EAAE,MAAM,EAAE,OAAO,CAAC;IAAEC,QAAQ,EAAE;EAAkH,CAAC,CACxK;EAED,MAAMC,qBAAqB,GAAIxD,IAAI,IAAK;IACpC,MAAMyD,SAAS,GAAGzD,IAAI,CAAC0D,WAAW,CAAC,CAAC;IACpC,KAAK,MAAMC,KAAK,IAAIN,cAAc,EAAE;MAChC,IAAIM,KAAK,CAACL,QAAQ,CAACM,IAAI,CAACC,CAAC,IAAI,IAAIC,MAAM,CAAC,MAAMD,CAAC,KAAK,EAAE,GAAG,CAAC,CAACE,IAAI,CAACN,SAAS,CAAC,CAAC,EAAE;QACzE,OAAOE,KAAK,CAACJ,QAAQ;MACzB;IACJ;IACA,OAAO,gGAAgG;EAC3G,CAAC;EAED,MAAMS,mBAAmB,GAAG,MAAOC,QAAQ,IAAK;IAC5C,IAAI;MACA,MAAMC,eAAe,GAAG;QACpBC,EAAE,EAAE,SAAS;QAAEC,EAAE,EAAE,OAAO;QAAEC,EAAE,EAAE,QAAQ;QAAEC,EAAE,EAAE,OAAO;QAAEC,EAAE,EAAE,SAAS;QACpEC,EAAE,EAAE,WAAW;QAAEC,EAAE,EAAE,SAAS;QAAEC,EAAE,EAAE,UAAU;QAAEC,EAAE,EAAE,SAAS;QAC7DC,EAAE,EAAE,SAAS;QAAEC,EAAE,EAAE,MAAM;QAAEC,EAAE,EAAE;MACnC,CAAC;MACD,MAAMC,cAAc,GAAGb,eAAe,CAACtE,QAAQ,CAAC,IAAI,SAAS;MAE7D,MAAMoF,gBAAgB,GAAG;AACrC,iEAAiED,cAAc;AAC/E;AACA;AACA,wBAAwBd,QAAQ,EAAE;MAEtB,MAAMV,QAAQ,GAAG,MAAM0B,KAAK,CAAC,mGAAmGtE,MAAM,EAAE,EAAE;QACtIuE,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACjBC,QAAQ,EAAE,CAAC;YACPC,KAAK,EAAE,CAAC;cAAExF,IAAI,EAAEgF;YAAiB,CAAC;UACtC,CAAC;QACL,CAAC;MACL,CAAC,CAAC;MAEF,MAAMS,IAAI,GAAG,MAAMlC,QAAQ,CAACmC,IAAI,CAAC,CAAC;MAClC,IAAID,IAAI,CAACvC,KAAK,EAAE,OAAO,UAAUuC,IAAI,CAACvC,KAAK,CAACyC,OAAO,GAAG;MAEtD,IAAIF,IAAI,CAACG,UAAU,IAAIH,IAAI,CAACG,UAAU,CAAC,CAAC,CAAC,IAAIH,IAAI,CAACG,UAAU,CAAC,CAAC,CAAC,CAACC,OAAO,EAAE;QACrE,OAAOJ,IAAI,CAACG,UAAU,CAAC,CAAC,CAAC,CAACC,OAAO,CAACL,KAAK,CAAC,CAAC,CAAC,CAACxF,IAAI;MACnD,CAAC,MAAM;QACH,OAAO,wCAAwC;MACnD;IACJ,CAAC,CAAC,OAAOkD,KAAK,EAAE;MACZ,OAAO,0CAA0C;IACrD;EACJ,CAAC;EAED,MAAM4C,UAAU,GAAG,MAAOC,CAAC,IAAK;IAC5B,IAAIA,CAAC,EAAEA,CAAC,CAACC,cAAc,CAAC,CAAC;IACzB,IAAI,CAAC9F,KAAK,CAAC+F,IAAI,CAAC,CAAC,IAAI7F,UAAU,EAAE;IAEjC,MAAM8F,OAAO,GAAG;MAAEnG,EAAE,EAAEoG,IAAI,CAACC,GAAG,CAAC,CAAC;MAAEpG,IAAI,EAAEE,KAAK;MAAED,MAAM,EAAE;IAAO,CAAC;IAC/DH,WAAW,CAACiD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAEmD,OAAO,CAAC,CAAC;IACvC/F,QAAQ,CAAC,EAAE,CAAC;IACZE,aAAa,CAAC,IAAI,CAAC;IAEnB,IAAIgG,eAAe;IAEnB,IAAI1F,MAAM,EAAE;MACR0F,eAAe,GAAG,MAAMrC,mBAAmB,CAACkC,OAAO,CAAClG,IAAI,CAAC;IAC7D,CAAC,MAAM;MACH,MAAM,IAAIsG,OAAO,CAACC,CAAC,IAAIC,UAAU,CAACD,CAAC,EAAE,GAAG,CAAC,CAAC;MAC1CF,eAAe,GAAG7C,qBAAqB,CAAC0C,OAAO,CAAClG,IAAI,CAAC;IACzD;IAEAF,WAAW,CAACiD,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;MAC1BhD,EAAE,EAAEoG,IAAI,CAACC,GAAG,CAAC,CAAC,GAAG,CAAC;MAClBpG,IAAI,EAAEqG,eAAe;MACrBpG,MAAM,EAAE;IACZ,CAAC,CAAC,CAAC;IACHI,aAAa,CAAC,KAAK,CAAC;EACxB,CAAC;EAED,oBACIb,OAAA;IAAKiH,SAAS,EAAC,WAAW;IAACC,KAAK,EAAE;MAAEC,MAAM,EAAE,qBAAqB;MAAEC,OAAO,EAAE,MAAM;MAAEC,aAAa,EAAE,QAAQ;MAAEC,QAAQ,EAAE,UAAU;MAAEC,QAAQ,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAS,CAAE;IAAAC,QAAA,gBACrKzH,OAAA;MAAKkH,KAAK,EAAE;QAAEE,OAAO,EAAE,MAAM;QAAEM,cAAc,EAAE,eAAe;QAAEC,UAAU,EAAE,QAAQ;QAAEC,OAAO,EAAE;MAAS,CAAE;MAAAH,QAAA,gBACtGzH,OAAA,CAACJ,UAAU;QAAAiI,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC,eACdhI,OAAA;QACIiI,OAAO,EAAEA,CAAA,KAAM/G,eAAe,CAAC,IAAI,CAAE;QACrCgG,KAAK,EAAE;UAAEgB,UAAU,EAAE,MAAM;UAAEC,MAAM,EAAE,MAAM;UAAEC,MAAM,EAAE,SAAS;UAAER,OAAO,EAAE;QAAO,CAAE;QAAAH,QAAA,eAElFzH,OAAA,CAACP,QAAQ;UAAC4I,KAAK,EAAC;QAAS;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC,EAEL/G,YAAY,iBACTjB,OAAA;MAAKkH,KAAK,EAAE;QACRI,QAAQ,EAAE,UAAU;QAAEgB,GAAG,EAAE,MAAM;QAAEC,KAAK,EAAE,MAAM;QAAEC,IAAI,EAAE,MAAM;QAAEC,MAAM,EAAE,GAAG;QAC3EP,UAAU,EAAE,OAAO;QAAEN,OAAO,EAAE,MAAM;QAAEc,YAAY,EAAE,MAAM;QAC1DC,SAAS,EAAE,6BAA6B;QAAER,MAAM,EAAE;MACtD,CAAE;MAAAV,QAAA,gBACEzH,OAAA;QAAKkH,KAAK,EAAE;UAAEE,OAAO,EAAE,MAAM;UAAEM,cAAc,EAAE,eAAe;UAAEkB,YAAY,EAAE;QAAO,CAAE;QAAAnB,QAAA,gBACnFzH,OAAA;UAAIkH,KAAK,EAAE;YAAEM,MAAM,EAAE;UAAE,CAAE;UAAAC,QAAA,EAAEtH,CAAC,CAAC,oBAAoB;QAAC;UAAA0H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACxDhI,OAAA;UAAQiI,OAAO,EAAEA,CAAA,KAAM/G,eAAe,CAAC,KAAK,CAAE;UAACgG,KAAK,EAAE;YAAEgB,UAAU,EAAE,MAAM;YAAEC,MAAM,EAAE,MAAM;YAAEC,MAAM,EAAE;UAAU,CAAE;UAAAX,QAAA,eAACzH,OAAA,CAACN,CAAC;YAACmJ,IAAI,EAAE;UAAG;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxI,CAAC,eACNhI,OAAA;QAAOkH,KAAK,EAAE;UAAEE,OAAO,EAAE,OAAO;UAAEwB,YAAY,EAAE,KAAK;UAAEE,QAAQ,EAAE,QAAQ;UAAET,KAAK,EAAE;QAAU,CAAE;QAAAZ,QAAA,EAAEtH,CAAC,CAAC,eAAe;MAAC;QAAA0H,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC3HhI,OAAA;QAAKkH,KAAK,EAAE;UAAEE,OAAO,EAAE,MAAM;UAAE2B,GAAG,EAAE;QAAO,CAAE;QAAAtB,QAAA,gBACzCzH,OAAA;UACIgJ,IAAI,EAAC,UAAU;UACfC,KAAK,EAAE9H,MAAO;UACd+H,QAAQ,EAAG3C,CAAC,IAAKnF,SAAS,CAACmF,CAAC,CAAC4C,MAAM,CAACF,KAAK,CAAE;UAC3CG,WAAW,EAAC,WAAW;UACvBlC,KAAK,EAAE;YAAEmC,IAAI,EAAE,CAAC;YAAEzB,OAAO,EAAE,MAAM;YAAEc,YAAY,EAAE,KAAK;YAAEP,MAAM,EAAE;UAAoB;QAAE;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACzF,CAAC,eACFhI,OAAA;UAAQiI,OAAO,EAAEjG,UAAW;UAACiF,SAAS,EAAC,iBAAiB;UAACC,KAAK,EAAE;YAAEE,OAAO,EAAE,MAAM;YAAEO,UAAU,EAAE,QAAQ;YAAEoB,GAAG,EAAE;UAAM,CAAE;UAAAtB,QAAA,gBAClHzH,OAAA,CAACL,IAAI;YAACkJ,IAAI,EAAE;UAAG;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,SACtB;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACR,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CACR,eAEDhI,OAAA;MAAKiH,SAAS,EAAEpH,MAAM,CAACyJ,UAAW;MAACpC,KAAK,EAAE;QAAEqC,SAAS,EAAE,GAAG;QAAEb,YAAY,EAAE;MAAgB,CAAE;MAAAjB,QAAA,gBACxFzH,OAAA;QAAAyH,QAAA,GAAKtH,CAAC,CAAC,cAAc,CAAC,EAAC,GAAC,eAAAH,OAAA;UAAMkH,KAAK,EAAE;YAAE4B,QAAQ,EAAE,OAAO;YAAEU,UAAU,EAAE,QAAQ;YAAEC,OAAO,EAAE;UAAI,CAAE;UAAAhC,QAAA,EAAEtG,MAAM,GAAG,IAAIhB,CAAC,CAAC,aAAa,CAAC,GAAG,GAAG,IAAIA,CAAC,CAAC,cAAc,CAAC;QAAG;UAAA0H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eACzKhI,OAAA;QAAKiH,SAAS,EAAEpH,MAAM,CAAC6J,MAAO;QAACxC,KAAK,EAAE;UAAEyC,eAAe,EAAExI,MAAM,GAAG,SAAS,GAAG,SAAS;UAAEkH,KAAK,EAAE,OAAO;UAAEuB,WAAW,EAAE;QAAc,CAAE;QAAAnC,QAAA,EACjItG,MAAM,GAAGhB,CAAC,CAAC,iBAAiB,CAAC,GAAGA,CAAC,CAAC,mBAAmB;MAAC;QAAA0H,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtD,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACL,CAAC,eAENhI,OAAA;MAAKiH,SAAS,EAAEpH,MAAM,CAACgK,UAAW;MAAApC,QAAA,GAC7BpH,QAAQ,CAACyJ,GAAG,CAAEC,GAAG,iBACd/J,OAAA;QAAkBiH,SAAS,EAAE,GAAGpH,MAAM,CAACsG,OAAO,IAAI4D,GAAG,CAACtJ,MAAM,KAAK,MAAM,GAAGZ,MAAM,CAACmK,IAAI,GAAGnK,MAAM,CAACoK,GAAG,EAAG;QAAAxC,QAAA,GAChGsC,GAAG,CAACtJ,MAAM,KAAK,KAAK,iBAAIT,OAAA;UAAKiH,SAAS,EAAEpH,MAAM,CAACqK,MAAO;UAAAzC,QAAA,eAACzH,OAAA,CAACT,GAAG;YAACsJ,IAAI,EAAE;UAAG;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eAC/EhI,OAAA;UAAKiH,SAAS,EAAEpH,MAAM,CAACsK,MAAO;UAAA1C,QAAA,GACzBsC,GAAG,CAACvJ,IAAI,EACRuJ,GAAG,CAACtJ,MAAM,KAAK,KAAK,iBACjBT,OAAA;YACIiH,SAAS,EAAEpH,MAAM,CAACuK,QAAS;YAC3BnC,OAAO,EAAEA,CAAA,KAAM9F,WAAW,CAAC4H,GAAG,CAACvJ,IAAI,CAAE;YACrC0G,KAAK,EAAE;cAAEiB,MAAM,EAAE,MAAM;cAAED,UAAU,EAAE,MAAM;cAAEE,MAAM,EAAE,SAAS;cAAER,OAAO,EAAE,KAAK;cAAES,KAAK,EAAE;YAAU,CAAE;YACnGgC,KAAK,EAAC,QAAQ;YAAA5C,QAAA,eAEdzH,OAAA,CAACR,OAAO;cAACqJ,IAAI,EAAE;YAAG;cAAAhB,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE;UAAC;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjB,CACX;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,EACL+B,GAAG,CAACtJ,MAAM,KAAK,MAAM,iBAAIT,OAAA;UAAKiH,SAAS,EAAEpH,MAAM,CAACqK,MAAO;UAAAzC,QAAA,eAACzH,OAAA,CAACV,IAAI;YAACuJ,IAAI,EAAE;UAAG;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC;MAAA,GAf3E+B,GAAG,CAACxJ,EAAE;QAAAsH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAgBX,CACR,CAAC,EACDpH,UAAU,iBACPZ,OAAA;QAAKiH,SAAS,EAAE,GAAGpH,MAAM,CAACsG,OAAO,IAAItG,MAAM,CAACoK,GAAG,EAAG;QAAAxC,QAAA,gBAC9CzH,OAAA;UAAKiH,SAAS,EAAEpH,MAAM,CAACqK,MAAO;UAAAzC,QAAA,eAACzH,OAAA,CAACT,GAAG;YAACsJ,IAAI,EAAE;UAAG;YAAAhB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACtDhI,OAAA;UAAKiH,SAAS,EAAEpH,MAAM,CAACsK,MAAO;UAACjD,KAAK,EAAE;YAAEoD,SAAS,EAAE,QAAQ;YAAEjC,KAAK,EAAE;UAAU,CAAE;UAAAZ,QAAA,EAC3EtH,CAAC,CAAC,UAAU;QAAC;UAAA0H,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACb,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CACR,eACDhI,OAAA;QAAKuK,GAAG,EAAEvJ;MAAW;QAAA6G,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACvB,CAAC,eAENhI,OAAA;MAAMwK,QAAQ,EAAElE,UAAW;MAACW,SAAS,EAAEpH,MAAM,CAAC4K,SAAU;MAACvD,KAAK,EAAE;QAAEwB,YAAY,EAAE;MAAgB,CAAE;MAAAjB,QAAA,gBAC9FzH,OAAA;QACIgJ,IAAI,EAAC,QAAQ;QACb/B,SAAS,EAAEpH,MAAM,CAAC6K,OAAQ;QAC1BzC,OAAO,EAAEpF,gBAAiB;QAC1BqE,KAAK,EAAE;UACHiB,MAAM,EAAE,MAAM;UACdC,MAAM,EAAE,SAAS;UACjBC,KAAK,EAAEvH,WAAW,GAAG,SAAS,GAAG,SAAS;UAC1C6I,eAAe,EAAE7I,WAAW,GAAG,SAAS,GAAG;QAC/C,CAAE;QACFuJ,KAAK,EAAEvJ,WAAW,GAAG,cAAc,GAAG,aAAc;QAAA2G,QAAA,eAEpDzH,OAAA,CAACX,GAAG;UAACwJ,IAAI,EAAE,EAAG;UAAC5B,SAAS,EAAEnG,WAAW,GAAGjB,MAAM,CAAC8K,KAAK,GAAG;QAAG;UAAA9C,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACzD,CAAC,eACThI,OAAA;QACIgJ,IAAI,EAAC,MAAM;QACXI,WAAW,EAAEjJ,CAAC,CAAC,eAAe,CAAE;QAChC8I,KAAK,EAAEvI,KAAM;QACbwI,QAAQ,EAAE3C,CAAC,IAAI5F,QAAQ,CAAC4F,CAAC,CAAC4C,MAAM,CAACF,KAAK,CAAE;QACxC2B,QAAQ,EAAEhK;MAAW;QAAAiH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACxB,CAAC,eACFhI,OAAA;QAAQgJ,IAAI,EAAC,QAAQ;QAAC/B,SAAS,EAAEpH,MAAM,CAACgL,OAAQ;QAACD,QAAQ,EAAE,CAAClK,KAAK,CAAC+F,IAAI,CAAC,CAAC,IAAI7F,UAAW;QAACsG,KAAK,EAAE;UAAEiB,MAAM,EAAE,MAAM;UAAEC,MAAM,EAAE;QAAU,CAAE;QAAAX,QAAA,eACjIzH,OAAA,CAACZ,IAAI;UAACyJ,IAAI,EAAE;QAAG;UAAAhB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEd,CAAC;AAAC9H,EAAA,CA3SID,OAAO;EAAA,QACeH,cAAc;AAAA;AAAAgL,EAAA,GADpC7K,OAAO;AA6Sb,eAAeA,OAAO;AAAC,IAAA6K,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}